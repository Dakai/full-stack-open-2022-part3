{"version":3,"sources":["services/persons.js","services/filterArray.js","components/Persons.js","components/Filter.js","components/PersonForm.js","App.js","index.js"],"names":["baseUrl","services_persons","id","axios","delete","concat","get","newObject","put","post","services_filterArray","persons","map","DeleteButton","_ref","setPersons","setShowFilter","name","setErrorMessage","react_default","a","createElement","Fragment","onClick","window","confirm","personsService","then","response","console","log","data","filterArrayService","catch","error","setTimeout","Persons","_ref2","showFilter","i","key","includes","number","Persons_DeleteButton","Filter","filterName","value","arrayData","person","toLowerCase","push","onChange","event","target","PersonForm","setNotifyMessage","_useState","useState","_useState2","Object","slicedToArray","newName","setNewName","_useState3","_useState4","newNumber","setNewNumber","ifIncluded","nametrim","trim","find","onSubmit","preventDefault","numbertrim","nameObject","type","App","_useState5","_useState6","errorMessage","_useState7","_useState8","notifyMessage","useEffect","message","className","components_Filter","components_PersonForm","components_Persons","ReactDOM","createRoot","document","getElementById","render","src_App"],"mappings":"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","file":"static/js/main.26356145.chunk.js","sourcesContent":["//import React from \"react\";\n//import { useState } from \"react\";\nimport axios from \"axios\";\n\n//const baseUrl = \"http://localhost:3001/api/persons\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  return axios.get(baseUrl);\n};\n\nconst create = (newObject) => {\n  return axios.post(baseUrl, newObject);\n};\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject);\n};\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\n/*\nexport default {\n  getAll: getAll,\n  update: update,\n  create: create,\n};\n*/\nexport default {\n  remove,\n  getAll,\n  update,\n  create,\n};\n","const filterArray = (persons) => {\n  //console.log(persons);\n  const ids = persons.map((persons) => persons.id);\n  return ids;\n};\n\nexport default {\n  filterArray,\n};\n","import React from \"react\";\nimport personsService from \"../services/persons\";\nimport filterArrayService from \"../services/filterArray\";\n\nconst DeleteButton = ({\n  id,\n  setPersons,\n  setShowFilter,\n  name,\n  setErrorMessage,\n}) => {\n  const handelDelete = () => {\n    if (window.confirm(`Delete ${name}?`)) {\n      personsService\n        .remove(id)\n        .then(() => {\n          personsService.getAll().then((response) => {\n            console.log(\"response\", response.data);\n            setPersons(response.data);\n            setShowFilter(filterArrayService.filterArray(response.data));\n          });\n        })\n        .catch((error) => {\n          setErrorMessage(`'${name}' was already removed from the server`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n    //console.log(\"id\", id);\n  };\n  return (\n    <>\n      <button onClick={handelDelete} id={id}>\n        delete\n      </button>\n    </>\n  );\n};\n\nconst Persons = ({\n  persons,\n  showFilter,\n  setPersons,\n  setShowFilter,\n  setErrorMessage,\n}) => {\n  //console.log(\"persons\", persons);\n  //console.log(\"showFilter\", showFilter);\n  return (\n    <ul>\n      {persons.map((persons, i) => (\n        <div key={i}>\n          {showFilter.includes(persons.id) ? (\n            <li key={i}>\n              {persons.name} {persons.number}{\" \"}\n              <DeleteButton\n                name={persons.name}\n                id={persons.id}\n                setShowFilter={setShowFilter}\n                setPersons={setPersons}\n                setErrorMessage={setErrorMessage}\n              />\n            </li>\n          ) : null}\n        </div>\n      ))}\n    </ul>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst Filter = ({ persons, setShowFilter }) => {\n  //console.log(\"showFilter\", showFilter);\n  const handleFilterChange = (event) => {\n    filterName(event.target.value);\n    //console.log(\"event.target.value\", event.target.value);\n  };\n\n  const filterName = (value) => {\n    const arrayData = [];\n    persons.map((person) => {\n      if (person.name.toLowerCase().includes(value.toLowerCase())) {\n        arrayData.push(person.id);\n      }\n      //console.log(\"value\", value);\n      //console.log(arrayData);\n      return setShowFilter(arrayData);\n    });\n  };\n\n  return (\n    <>\n      filter shown with:\n      <input onChange={handleFilterChange} />\n    </>\n  );\n};\nexport default Filter;\n","import React from \"react\";\nimport { useState } from \"react\";\nimport personsService from \"../services/persons\";\nimport filterArrayService from \"../services/filterArray\";\n\nconst PersonForm = ({\n  persons,\n  setPersons,\n  showFilter,\n  setShowFilter,\n  setNotifyMessage,\n}) => {\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const ifIncluded = () => {\n    const nametrim = newName.trim();\n    const person = persons.find((person) => person.name === nametrim);\n    return person;\n  };\n  /*\n  const ifIncluded = (newName) => {\n    const arrayData = [];\n    persons.map((person) => {\n      arrayData.push(person.name);\n      return null;\n    });\n    if (arrayData.includes(newName)) {\n      return true;\n    }\n  };\n\t*/\n  const addName = (event) => {\n    console.log(ifIncluded());\n    if (!!newName) {\n      //prevent adding a empty entry\n      event.preventDefault();\n      //console.log(\"button clicked\", event.target);\n      const nametrim = newName.trim();\n      const numbertrim = newNumber.trim();\n      const nameObject = {\n        name: nametrim,\n        number: numbertrim,\n      };\n      if (ifIncluded()) {\n        if (\n          window.confirm(\n            `${nametrim} is already added to the Phonebook, repace the old number with the new one?`\n          )\n        ) {\n          const id = ifIncluded().id;\n          console.log(id);\n          personsService.update(id, nameObject).then((response) => {\n            personsService.getAll().then((response) => {\n              setPersons(response.data);\n              setShowFilter(filterArrayService.filterArray(response.data));\n              setNotifyMessage(`${nametrim} number updated`);\n              setNewName(\"\");\n              setNewNumber(\"\");\n              setTimeout(() => {\n                setNotifyMessage(null);\n              }, 5000);\n            });\n          });\n        }\n        //alert(newName + \"is already added to Phonebook\");\n      } else {\n        //console.log(\"nameObject\", nameObject);\n        setNewName(\"\");\n        setNewNumber(\"\");\n        console.log(\"add new person & persons:\", persons);\n        personsService.create(nameObject).then((response) => {\n          console.log(response);\n          setPersons(persons.concat(response.data));\n          setShowFilter(showFilter.concat(response.data.id));\n          setNotifyMessage(`Added ${nametrim}`);\n          setTimeout(() => {\n            setNotifyMessage(null);\n          }, 5000);\n        });\n      }\n    }\n  };\n\n  return (\n    <form onSubmit={addName}>\n      <div>\n        name:\n        <input value={newName} onChange={handleNameChange} />\n      </div>\n      <div>\n        number:\n        <input value={newNumber} onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\nexport default PersonForm;\n","import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport personsService from \"./services/persons\";\nimport filterArrayService from \"./services/filterArray\";\nimport \"./index.css\";\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [showFilter, setShowFilter] = useState();\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [notifyMessage, setNotifyMessage] = useState(null);\n\n  const ErrorMessage = ({ message }) => {\n    console.log(message);\n    if (message === null) {\n      return null;\n    } else {\n      return <div className=\"error\">{message}</div>;\n    }\n  };\n\n  const NotifyMessage = ({ message }) => {\n    console.log(message);\n    if (message === null) {\n      return null;\n    } else {\n      return <div className=\"notify\">{message}</div>;\n    }\n  };\n\n  useEffect(() => {\n    //console.log(\"effect\");\n    personsService.getAll().then((response) => {\n      setPersons(response.data);\n      setShowFilter(filterArrayService.filterArray(response.data));\n      //console.log(FilterArray(response.data));\n    });\n  }, []);\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <ErrorMessage message={errorMessage} />\n      <NotifyMessage message={notifyMessage} />\n      <div>\n        <Filter persons={persons} setShowFilter={setShowFilter} />\n      </div>\n      <h3>Add a new </h3>\n      <PersonForm\n        persons={persons}\n        setPersons={setPersons}\n        setShowFilter={setShowFilter}\n        showFilter={showFilter}\n        setNotifyMessage={setNotifyMessage}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        setShowFilter={setShowFilter}\n        persons={persons}\n        showFilter={showFilter}\n        setPersons={setPersons}\n        setErrorMessage={setErrorMessage}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\n//import ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.createRoot(document.getElementById(\"root\")).render(<App />);\n"],"sourceRoot":""}