(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(51)},49:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),c=n.n(o),u=n(2),l=n(4),s=n.n(l),i="/api/persons",m=function(e){return s.a.delete("".concat(i,"/").concat(e))},d=function(){return s.a.get(i)},f=function(e,t){return s.a.put("".concat(i,"/").concat(e),t)},h=function(e){return s.a.post(i,e)},E=function(e){return e.map(function(e){return e.id})},w=function(e){var t=e.id,n=e.setPersons,a=e.setShowFilter,o=e.name,c=e.setErrorMessage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){window.confirm("Delete ".concat(o,"?"))&&m(t).then(function(){d().then(function(e){n(e.data),a(E(e.data))})}).catch(function(e){c("'".concat(o,"' was already removed from the server")),setTimeout(function(){c(null)},5e3)})},id:t},"delete"))},v=function(e){var t=e.persons,n=e.showFilter,a=e.setPersons,o=e.setShowFilter,c=e.setErrorMessage;return r.a.createElement("ul",null,t.map(function(e,t){return r.a.createElement("div",{key:t},n.includes(e.id)?r.a.createElement("li",{key:t},e.name," ",e.number," ",r.a.createElement(w,{name:e.name,id:e.id,setShowFilter:o,setPersons:a,setErrorMessage:c})):null)}))},b=function(e){var t=e.persons,n=e.setShowFilter,a=function(e){var a=[];t.map(function(t){return t.name.toLowerCase().includes(e.toLowerCase())&&a.push(t.id),n(a)})};return r.a.createElement(r.a.Fragment,null,"filter shown with:",r.a.createElement("input",{onChange:function(e){a(e.target.value)}}))},p=function(e){var t=e.persons,n=e.setPersons,o=e.showFilter,c=e.setShowFilter,l=e.setNotifyMessage,s=Object(a.useState)(""),i=Object(u.a)(s,2),m=i[0],w=i[1],v=Object(a.useState)(""),b=Object(u.a)(v,2),p=b[0],g=b[1],S=function(){var e=m.trim();return t.find(function(t){return t.name===e})};return r.a.createElement("form",{onSubmit:function(e){if(console.log(S()),m){e.preventDefault();var a=m.trim(),r=p.trim(),u={name:a,number:r};if(S()){if(window.confirm("".concat(a," is already added to the Phonebook, repace the old number with the new one?"))){var s=S().id;f(s,u).then(function(e){d().then(function(e){n(e.data),c(E(e.data)),l("".concat(a," number updated")),w(""),g(""),setTimeout(function(){l(null)},5e3)})})}}else w(""),g(""),h(u).then(function(e){n(t.concat(e.data)),c(o.concat(e.data.id)),l("Added ".concat(a)),setTimeout(function(){l(null)},5e3)})}}},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:m,onChange:function(e){w(e.target.value)}})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:p,onChange:function(e){g(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},g=(n(49),function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(),l=Object(u.a)(c,2),s=l[0],i=l[1],m=Object(a.useState)(null),f=Object(u.a)(m,2),h=f[0],w=f[1],g=Object(a.useState)(null),S=Object(u.a)(g,2),F=S[0],j=S[1];return Object(a.useEffect)(function(){d().then(function(e){o(e.data),i(E(e.data))})},[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(function(e){var t=e.message;return console.log(t),null===t?null:r.a.createElement("div",{className:"error"},t)},{message:h}),r.a.createElement(function(e){var t=e.message;return console.log(t),null===t?null:r.a.createElement("div",{className:"notify"},t)},{message:F}),r.a.createElement("div",null,r.a.createElement(b,{persons:n,setShowFilter:i})),r.a.createElement("h3",null,"Add a new "),r.a.createElement(p,{persons:n,setPersons:o,setShowFilter:i,showFilter:s,setNotifyMessage:j}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(v,{setShowFilter:i,persons:n,showFilter:s,setPersons:o,setErrorMessage:w}))});c.a.createRoot(document.getElementById("root")).render(r.a.createElement(g,null))}},[[19,2,1]]]);
//# sourceMappingURL=main.93803030.chunk.js.map