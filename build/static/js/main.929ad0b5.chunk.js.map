{"version":3,"sources":["services/persons.js","services/filterArray.js","components/Persons.js","components/Filter.js","components/PersonForm.js","App.js","index.js"],"names":["baseUrl","services_persons","id","axios","delete","concat","get","newObject","put","post","services_filterArray","persons","map","DeleteButton","_ref","setPersons","setShowFilter","name","setErrorMessage","react_default","a","createElement","Fragment","onClick","window","confirm","personsService","then","response","data","filterArrayService","catch","error","setTimeout","Persons","_ref2","showFilter","i","key","includes","number","Persons_DeleteButton","Filter","filterName","value","arrayData","person","toLowerCase","push","onChange","event","target","PersonForm","setNotifyMessage","_useState","useState","_useState2","Object","slicedToArray","newName","setNewName","_useState3","_useState4","newNumber","setNewNumber","ifIncluded","nametrim","trim","find","onSubmit","console","log","preventDefault","numbertrim","nameObject","JSON","stringify","type","App","_useState5","_useState6","errorMessage","_useState7","_useState8","notifyMessage","useEffect","message","className","components_Filter","components_PersonForm","components_Persons","ReactDOM","createRoot","document","getElementById","render","src_App"],"mappings":"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","file":"static/js/main.929ad0b5.chunk.js","sourcesContent":["//import React from \"react\";\n//import { useState } from \"react\";\nimport axios from \"axios\";\n\n//const baseUrl = \"http://localhost:3001/api/persons\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  return axios.get(baseUrl);\n};\n\nconst create = (newObject) => {\n  return axios.post(baseUrl, newObject);\n};\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject);\n};\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\n/*\nexport default {\n  getAll: getAll,\n  update: update,\n  create: create,\n};\n*/\nexport default {\n  remove,\n  getAll,\n  update,\n  create,\n};\n","const filterArray = (persons) => {\n  //console.log(persons);\n  const ids = persons.map((persons) => persons.id);\n  return ids;\n};\n\nexport default {\n  filterArray,\n};\n","import React from \"react\";\nimport personsService from \"../services/persons\";\nimport filterArrayService from \"../services/filterArray\";\n\nconst DeleteButton = ({\n  id,\n  setPersons,\n  setShowFilter,\n  name,\n  setErrorMessage,\n}) => {\n  const handelDelete = () => {\n    if (window.confirm(`Delete ${name}?`)) {\n      personsService\n        .remove(id)\n        .then(() => {\n          personsService.getAll().then((response) => {\n            //console.log(\"response\", response.data);\n            setPersons(response.data);\n            setShowFilter(filterArrayService.filterArray(response.data));\n          });\n        })\n        .catch((error) => {\n          setErrorMessage(`'${name}' was already removed from the server`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n    //console.log(\"id\", id);\n  };\n  return (\n    <>\n      <button onClick={handelDelete} id={id}>\n        delete\n      </button>\n    </>\n  );\n};\n\nconst Persons = ({\n  persons,\n  showFilter,\n  setPersons,\n  setShowFilter,\n  setErrorMessage,\n}) => {\n  //console.log(\"persons\", persons);\n  //console.log(\"showFilter\", showFilter);\n  return (\n    <ul>\n      {persons.map((persons, i) => (\n        <div key={i}>\n          {showFilter.includes(persons.id) ? (\n            <li key={i}>\n              {persons.name} {persons.number}{\" \"}\n              <DeleteButton\n                name={persons.name}\n                id={persons.id}\n                setShowFilter={setShowFilter}\n                setPersons={setPersons}\n                setErrorMessage={setErrorMessage}\n              />\n            </li>\n          ) : null}\n        </div>\n      ))}\n    </ul>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst Filter = ({ persons, setShowFilter }) => {\n  //console.log(\"showFilter\", showFilter);\n  const handleFilterChange = (event) => {\n    filterName(event.target.value);\n    //console.log(\"event.target.value\", event.target.value);\n  };\n\n  const filterName = (value) => {\n    const arrayData = [];\n    persons.map((person) => {\n      if (person.name.toLowerCase().includes(value.toLowerCase())) {\n        arrayData.push(person.id);\n      }\n      //console.log(\"value\", value);\n      //console.log(arrayData);\n      return setShowFilter(arrayData);\n    });\n  };\n\n  return (\n    <>\n      filter shown with:\n      <input onChange={handleFilterChange} />\n    </>\n  );\n};\nexport default Filter;\n","import React from \"react\";\nimport { useState } from \"react\";\nimport personsService from \"../services/persons\";\nimport filterArrayService from \"../services/filterArray\";\n\nconst PersonForm = ({\n  persons,\n  setPersons,\n  showFilter,\n  setShowFilter,\n  setNotifyMessage,\n  setErrorMessage,\n}) => {\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const ifIncluded = () => {\n    const nametrim = newName.trim();\n    const person = persons.find((person) => person.name === nametrim);\n    return person;\n  };\n  /*\n  const ifIncluded = (newName) => {\n    const arrayData = [];\n    persons.map((person) => {\n      arrayData.push(person.name);\n      return null;\n    });\n    if (arrayData.includes(newName)) {\n      return true;\n    }\n  };\n\t*/\n  const addName = (event) => {\n    console.log(ifIncluded());\n    //if (!!newName) {\n    //prevent adding a empty entry\n    event.preventDefault();\n    const nametrim = newName.trim();\n    const numbertrim = newNumber.trim();\n    const nameObject = {\n      name: nametrim,\n      number: numbertrim,\n    };\n    if (ifIncluded()) {\n      if (\n        window.confirm(\n          `${nametrim} is already added to the Phonebook, repace the old number with the new one?`\n        )\n      ) {\n        const id = ifIncluded().id;\n        //console.log(id);\n        personsService\n          .update(id, nameObject)\n          .then((response) => {\n            personsService.getAll().then((response) => {\n              setPersons(response.data);\n              setShowFilter(filterArrayService.filterArray(response.data));\n              setNotifyMessage(`${nametrim} number updated`);\n              setNewName(\"\");\n              setNewNumber(\"\");\n              setTimeout(() => {\n                setNotifyMessage(null);\n              }, 5000);\n            });\n          })\n          .catch((error) => {\n            console.log(error.response.data);\n            setErrorMessage(JSON.stringify(error.response.data.error));\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n          });\n      }\n      //alert(newName + \"is already added to Phonebook\");\n    } else {\n      //console.log(\"nameObject\", nameObject);\n      setNewName(\"\");\n      setNewNumber(\"\");\n      console.log(\"add new person & persons:\", persons);\n      personsService\n        .create(nameObject)\n        .then((response) => {\n          console.log(response);\n          setPersons(persons.concat(response.data));\n          setShowFilter(showFilter.concat(response.data.id));\n          setNotifyMessage(`Added ${nametrim}`);\n          setTimeout(() => {\n            setNotifyMessage(null);\n          }, 5000);\n        })\n        .catch((error) => {\n          console.log(error.response.data);\n          setErrorMessage(JSON.stringify(error.response.data.error));\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    }\n    //}\n  };\n\n  return (\n    <form onSubmit={addName}>\n      <div>\n        name:\n        <input value={newName} onChange={handleNameChange} />\n      </div>\n      <div>\n        number:\n        <input value={newNumber} onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\nexport default PersonForm;\n","import React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport personsService from \"./services/persons\";\nimport filterArrayService from \"./services/filterArray\";\nimport \"./index.css\";\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [showFilter, setShowFilter] = useState();\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [notifyMessage, setNotifyMessage] = useState(null);\n\n  const ErrorMessage = ({ message }) => {\n    console.log(message);\n    if (message === null) {\n      return null;\n    } else {\n      return <div className=\"error\">{message}</div>;\n    }\n  };\n\n  const NotifyMessage = ({ message }) => {\n    console.log(message);\n    if (message === null) {\n      return null;\n    } else {\n      return <div className=\"notify\">{message}</div>;\n    }\n  };\n\n  useEffect(() => {\n    //console.log(\"effect\");\n    personsService.getAll().then((response) => {\n      setPersons(response.data);\n      setShowFilter(filterArrayService.filterArray(response.data));\n      //console.log(FilterArray(response.data));\n    });\n  }, []);\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <ErrorMessage message={errorMessage} />\n      <NotifyMessage message={notifyMessage} />\n      <div>\n        <Filter persons={persons} setShowFilter={setShowFilter} />\n      </div>\n      <h3>Add a new </h3>\n      <PersonForm\n        persons={persons}\n        setPersons={setPersons}\n        setShowFilter={setShowFilter}\n        showFilter={showFilter}\n        setNotifyMessage={setNotifyMessage}\n        setErrorMessage={setErrorMessage}\n      />\n      <h3>Numbers</h3>\n      <Persons\n        setShowFilter={setShowFilter}\n        persons={persons}\n        showFilter={showFilter}\n        setPersons={setPersons}\n        setErrorMessage={setErrorMessage}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\n//import ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.createRoot(document.getElementById(\"root\")).render(<App />);\n"],"sourceRoot":""}