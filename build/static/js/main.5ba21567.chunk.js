(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){e.exports=n(51)},49:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),c=n.n(o),s=n(2),l=n(4),u=n.n(l),i="/api/persons",m=function(e){return u.a.delete("".concat(i,"/").concat(e))},d=function(){return u.a.get(i)},f=function(e,t){return u.a.put("".concat(i,"/").concat(e),t)},h=function(e){return u.a.post(i,e)},E=function(e){return e.map(function(e){return e.id})},p=function(e){var t=e.id,n=e.setPersons,a=e.setShowFilter,o=e.name,c=e.setErrorMessage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){window.confirm("Delete ".concat(o,"?"))&&m(t).then(function(){d().then(function(e){n(e.data),a(E(e.data))})}).catch(function(e){c("'".concat(o,"' was already removed from the server")),setTimeout(function(){c(null)},5e3)})},id:t},"delete"))},g=function(e){var t=e.persons,n=e.showFilter,a=e.setPersons,o=e.setShowFilter,c=e.setErrorMessage;return r.a.createElement("ul",null,t.map(function(e,t){return r.a.createElement("div",{key:t},n.includes(e.id)?r.a.createElement("li",{key:t},e.name," ",e.number," ",r.a.createElement(p,{name:e.name,id:e.id,setShowFilter:o,setPersons:a,setErrorMessage:c})):null)}))},w=function(e){var t=e.persons,n=e.setShowFilter,a=function(e){var a=[];t.map(function(t){return t.name.toLowerCase().includes(e.toLowerCase())&&a.push(t.id),n(a)})};return r.a.createElement(r.a.Fragment,null,"filter shown with:",r.a.createElement("input",{onChange:function(e){a(e.target.value)}}))},v=function(e){var t=e.persons,n=e.setPersons,o=e.showFilter,c=e.setShowFilter,l=e.setNotifyMessage,u=e.setErrorMessage,i=Object(a.useState)(""),m=Object(s.a)(i,2),p=m[0],g=m[1],w=Object(a.useState)(""),v=Object(s.a)(w,2),b=v[0],S=v[1],O=function(){var e=p.trim();return t.find(function(t){return t.name===e})};return r.a.createElement("form",{onSubmit:function(e){console.log(O()),e.preventDefault();var a=p.trim(),r=b.trim(),s={name:a,number:r};if(O()){if(window.confirm("".concat(a," is already added to the Phonebook, repace the old number with the new one?"))){var i=O().id;f(i,s).then(function(e){d().then(function(e){n(e.data),c(E(e.data)),l("".concat(a," number updated")),g(""),S(""),setTimeout(function(){l(null)},5e3)})}).catch(function(e){console.log(e.response.data),u(JSON.stringify(e.response.data.error)),setTimeout(function(){u(null)},5e3)})}}else g(""),S(""),console.log("add new person & persons:",t),h(s).then(function(e){console.log(e),n(t.concat(e.data)),c(o.concat(e.data.id)),l("Added ".concat(a)),setTimeout(function(){l(null)},5e3)}).catch(function(e){console.log(e.response.data),u(JSON.stringify(e.response.data.error)),setTimeout(function(){u(null)},5e3)})}},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:p,onChange:function(e){g(e.target.value)}})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:b,onChange:function(e){S(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},b=(n(49),function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(),l=Object(s.a)(c,2),u=l[0],i=l[1],m=Object(a.useState)(null),f=Object(s.a)(m,2),h=f[0],p=f[1],b=Object(a.useState)(null),S=Object(s.a)(b,2),O=S[0],F=S[1];return Object(a.useEffect)(function(){d().then(function(e){o(e.data),i(E(e.data))})},[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(function(e){var t=e.message;return console.log(t),null===t?null:r.a.createElement("div",{className:"error"},t)},{message:h}),r.a.createElement(function(e){var t=e.message;return console.log(t),null===t?null:r.a.createElement("div",{className:"notify"},t)},{message:O}),r.a.createElement("div",null,r.a.createElement(w,{persons:n,setShowFilter:i})),r.a.createElement("h3",null,"Add a new "),r.a.createElement(v,{persons:n,setPersons:o,setShowFilter:i,showFilter:u,setNotifyMessage:F,setErrorMessage:p}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(g,{setShowFilter:i,persons:n,showFilter:u,setPersons:o,setErrorMessage:p}))});c.a.createRoot(document.getElementById("root")).render(r.a.createElement(b,null))}},[[19,2,1]]]);
//# sourceMappingURL=main.5ba21567.chunk.js.map